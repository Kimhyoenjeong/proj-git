<html lang="ko"><head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">	
	<title>농림축산식품 공공데이터 포털</title>
	<link href="/css/common.css?v=20220323" rel="stylesheet">
	<link href="/css/style.css?v=20220323" rel="stylesheet">
	<link href="/css/style_dp.css" rel="stylesheet">
	<link href="/css/mobile.css?v=20220323" rel="stylesheet" media="(max-width:1280px)">
	<!-- HTLM5shiv ie6~8 -->
	<!--[if lt IE 9]> 
		<script src="/js/html5shiv.min.js"></script>
		<script src="/js/respond.min.js"></script>
		<script>
			alert("현재 당신이 보는 브라우저는 지원하지 않습니다. 최신 브라우저로 업데이트해주세요!");
		</script>
	<![endif]-->
	

 

<script type="text/javascript" async="" src="//weblog.epis.or.kr/piwik/matomo.js"></script><script src="/js/jquery-3.5.1.min.js?v=20220323"></script>
<script src="/js/jquery-ui.min.js?v=20220323"></script>
<script src="/js/swiper.min.js?v=20220323"></script>
<script src="/js/iscroll.js?v=20220323"></script>
<script src="/js/common.js?v=20220323"></script>
<script src="/js/common_renewal.js?v=20220323"></script>

<script src="/js/message.js?v=20220323"></script>
<script src="/js/popup.js?v=20220323"></script>
<script src="/js/popup_renewal.js?v=20220323"></script>

<script src="/js/jquery.alphanumeric.js?v=20220323"></script>


<script src="/js/jquery/jquery.cookie.js?v=20220323"></script>
<script src="/js/jquery/jquery.form.js?v=20220323"></script>


<script src="/js/jquery/jquery.waiting-0.1.1/dist/jquery.waiting.min.js?v=20220323"></script>
<link type="text/css" rel="stylesheet" media="screen" href="/js/jquery/jquery.waiting-0.1.1/dist/waiting.css?v=20220323">


<script src="/js/jquery/jquery.MultiFile.js?v=20220323"></script>

	
	<script>
		$(document).ready(function(){
			
		});
		
		function showAlertMessage(el, errorMessage) {
			$("#" + el).focus();
			alert(errorMessage);
		}
		
		function showErrorMessage(el, errorMessage) {
			$("#" + el).focus();
			alert(errorMessage);
		}
		function showConformMessage(ConformMessage) {
			
			return window.confirm(ConformMessage);
		}
		
	</script>

<link type="text/css" href="https://map.vworld.kr/css/ol3/vwmap.ol3.css" rel="stylesheet"><link type="text/css" href="https://map.vworld.kr/css/vmap23.css" rel="stylesheet"></head><body>
	<div id="wrap">
		<div class="skiptoContent">
			<a href="https://data.mafra.go.kr/prent/indexPrentMap.do#main">본문 바로가기</a>
		</div>
		
		
		<main id="main" class="main-sub"><!-- sub page : main-sub class 추가 -->
			

 


<script type="text/javascript" src="./map_files/vworldMapInit.js.do"></script><script type="text/javascript" src="https://map.vworld.kr/jquery/ol3/jquery-1.11.3.min.js"></script><script type="text/javascript" src="https://map.vworld.kr/jquery/ol3/jquery-ui.min.js"></script><script type="text/javascript" src="https://map.vworld.kr/js/map/OpenLayers-3.10.1/ol.js"></script><script type="text/javascript" src="https://map.vworld.kr/js/map/chart/ol3/v2.raphael.js"></script><script type="text/javascript" src="https://map.vworld.kr/js/map/chart/ol3/v2.g.raphael.max.js"></script><script type="text/javascript" src="https://map.vworld.kr/js/map/chart/ol3/v2.g.bar.max.js"></script><script type="text/javascript" src="https://map.vworld.kr/js/map/chart/ol3/v2.g.pie.max.js"></script><script type="text/javascript" src="https://map.vworld.kr/js/vw.ol3.2DMapClassInit_v30.js"></script><script type="text/javascript" src="https://map.vworld.kr/js/sopMapInit.js.do?version=2.0&amp;apiKey=E09FE1B8-CD2B-31FB-8200-0A82D52143DB"></script><script type="text/javascript" src="https://map.vworld.kr/check2DNum.do?version=2.0&amp;key=E09FE1B8-CD2B-31FB-8200-0A82D52143DB"></script><script type="text/javascript" src="./map_files/jquery-1.11.3.min.js"></script><script type="text/javascript" src="./map_files/jquery-ui.min.js(1)"></script><script type="text/javascript" src="./map_files/ol.js"></script><script type="text/javascript" src="./map_files/v2.raphael.js"></script><script type="text/javascript" src="./map_files/v2.g.raphael.max.js"></script><script type="text/javascript" src="./map_files/v2.g.bar.max.js"></script><script type="text/javascript" src="./map_files/v2.g.pie.max.js"></script><script type="text/javascript" src="./map_files/vw.ol3.2DMapClassInit_v30.js"></script><script type="text/javascript" src="./map_files/sopMapInit.js.do"></script><script type="text/javascript" src="./map_files/check2DNum.do"></script>
<link rel="stylesheet" href="./map_files/font2.css">

<script>
    var gridDataJson;

    $(document).ready(function(){
        // 최초 위치를 세종시로 설정
        geocoder("세종특별자치시"  , "세종특별자치시");
        getGisData("세종특별자치시", "세종특별자치시", "");
        // vmap 로고 숨기기
        $("#vmap .vw-logo").hide();
        $("#vmap .vw-notice").hide();
        rowCnt();
    });
    
    /*
     * 각 엘리먼트 이벤트 등록
     */
    $(function(){
        // 시도 목록 조회
        $.ajax({
            type     : "get",
            url      : "/prent/admCodeList.do",
            data     : {authkey : $('#sido_key').val()},
            async    : false,
            dataType : 'json',
            success  :
                function(data) {
                    var html = "<option value=''>-- 시도선택 --</option>";
                 
                    for(var i=0; i<data.length; i++){ 
                        html +="<option value='" + data[i].admCode + "'>" + data[i].admCodeNm + "</option>"
                    }
                 
                    $('#sido_code').html(html);
                },
            error : function(xhr, stat, err) {}
        });

        // 시도 셀렉트박스 변경 이벤트 (시군 목록 조회)
        $(document).on("change", "#sido_code", function(){
            
            var thisVal = $(this).val();        
             
            $.ajax({
                type     : "get",
                url      : "/prent/admSiList.do",
                data     : {admCode : thisVal, authkey : $('#sigoon_key').val()},
                async    : false,
                dataType : 'json',
                success  :
                    function(data) {
                        var html = "<option value=''>-- 시군선택 --</option>";
                     
                        for(var i=0;i<data.length;i++){ 
                            html +="<option value='" + data[i].admCode + "'>" + data[i].admCodeNm + "</option>"
                        }
                     
                        $('#sigoon_code').html(html);
                    },
                error : function(xhr, stat, err) {}
            });
            
            $("#siNm").val($("#sido_code option:selected").text());
            $.ajax({
            	type : "post",
            	url : "/prent/relaxCnt.do",
            	data : $("#myForm").serialize(),
             	async : false,
            	dataType : 'json',
            	success :
            		function(data){
            			$("#totalCnt").text(data.totalCnt);
            			$("#siCnt").text(data.siCnt);
            			$("#sidoNm").text(data.siNm + " 안심식당 수 ").append("<span>(단위 : 개)</span>");
            			$("#sidoNm2").text(data.siNm + " 업종별 ").append("<span>(단위 : 개)</span>");
            			$("#cntA").text(data.cntA);
            			$("#cntB").text(data.cntB);
            			$("#cntC").text(data.cntC);
            			$("#cntD").text(data.cntD);
            			$("#cntE").text(data.cntE);
            			$("#cntF").text(data.cntF);
            	},
            	error : function(xhr, stat, err) {}
            });
        });
        // 시군 셀렉트박스 변경 이벤트 (시군 지도영역 및 마커 표시)
        $(document).on("change","#sigoon_code",function(){
            searchData();
        });
        
        // 검색어 키입력 이벤트 (엔터)
        $("#title").keypress(function(e){
            if(e.which == 13) {
                searchData();
            }
        });
        
        
        // 조회버튼 클릭 이벤트
        $("#btnSearch").click(function(){
            searchData();
        });
    })
    
    /*
     * 마커 목록 조회 및 선택지역 지도영역 표시
     */
    var searchData = function() {
        if($("#sido_code option:selected").val() == "") {
            alert("조회하실 시도지역을 선택해주세요.");
            $("#sido_code").focus();
            return;
        }
        
        if($("#sigoon_code option:selected").val() == "") {
            alert("조회하실 시군지역을 선택해주세요.");
            $("#sigoon_code").focus();
            return;
        }
        
        // 시군 지도영역 표시
        geocoder($("#sido_code option:selected").text(), $("#sigoon_code option:selected").text());
        
        // 마커표시 목록 조회
        getGisData($("#sido_code option:selected").text(), $("#sigoon_code option:selected").text(), $("#title").val());
    };
    
    /*
     * 지도영역 표시
     */
    var drawVector = function(x, y) {
        $.ajax({
            type     : "get",
            url      : "//api.vworld.kr/req/data?geomFilter=POINT(" + x + " " + y + ")",
            data     : $('#dataForm').serialize(),
            dataType : 'jsonp',
            async    : false,
            success  :
                function(data) {
                    // 기존 검색 레이어 삭제
                    vmap.getLayers().forEach(function(layer) { 
                        if(layer.get("vectorLayer") == "search_vector") {
                            vmap.removeLayer(layer);
                        }
                    });
                    
                    // 백터 소스 생성
                    var vectorSource = new ol.source.Vector({
                        features : (new ol.format.GeoJSON()).readFeatures(data.response.result.featureCollection)
                    });
                    
                    // 백터 레이어 설정
                    var vector_layer = new ol.layer.Vector({
                        source : vectorSource
                    });
                 
                    // 백터 레이어 스타일 설정
                    var style = new ol.style.Style({
                        stroke : new ol.style.Stroke({
                            color : [ 0, 81, 116, .7 ],
                            width : 3
                        }),
                        fill : new ol.style.Fill({
                            color : [ 255, 255, 255, .0 ]
                        })
                    });

                    vector_layer.setStyle(style);
                    vector_layer.set("vectorLayer","search_vector");
                    
                    // 맵에 백터 레이어 등록
                    vmap.addLayer(vector_layer);
            },
            error : function(xhr, stat, err) {}
        });
    }


    /*
     * 선택 지역 좌표 조회
     */
    var geocoder = function(sido, sigoon) {
        var addr = sido + " " +  sigoon;
        
        $.ajax({
            type     : "get",
            url      : "//api.vworld.kr/req/address?service=address&version=2.0&request=getcoord&format=json&type=parcel",
            data     : {apiKey : $('[name=apiKey]').val(), address : addr},
            dataType : 'jsonp',
            success  : 
                function(data) {
                    // 지도화면 이동
                    moveMap(data.response.result.point.x*1, data.response.result.point.y*1, 13);
                    
                    // 선택지역 지도 표시
                    var point = ol.proj.transform([ data.response.result.point.x*1, data.response.result.point.y*1], 'EPSG:4326', "EPSG:900913");
                    drawVector(point[0], point[1]);
            },
            error : function(xhr, stat, err) {}
        });
    }
     
     
    /*
     * 지도화면 이동
     */
    var moveMap = function(x, y, zoom) {
        vmap.getView().setCenter(ol.proj.transform([x, y], "EPSG:4326", "EPSG:900913"));
        vmap.getView().setZoom(zoom);
    }


    /*
     * 마커 목록 조회 및 표시
     */
    function getGisData(sido, sigoon, title){
    	
        // 세종특별자치시는 구 행정구역이 없으므로 공백처리
        if(sigoon == "세종특별자치시") {
            sigoon = "";
        }
        
        $.ajax({
            url  : "/prent/getGisDataMap.do",
            data : {
                srchVal1 : sido,
                srchVal2 : sido + " " + sigoon + "," + title
            },
            async    : false,
            dataType : 'json',
            success  :
                function(data) {
                    setMarker(data);
                },
            error : function(xhr, stat, err) {}
        });
    }


    /*
     * 마커 설정
     */
    function setMarker(data) {
        // 마커 초기화
        removeAllMarker();
        
        // 마커 옵션 설정
        $.each(data, function() {
            vw.ol3.markerOption = {
                x        : this.lo,
                y        : this.la,
                title    : this.title,
                epsg     : "EPSG:4326",
                contents : this.contents,
                iconUrl  : "/img/icon/marker_icon.png"
            };
            
            // 마커 레이어에 등록
            markerLayer.addMarker(vw.ol3.markerOption);
        });
    }

    /*
     * 마커 전체 삭제
     */
    function removeAllMarker() {
        if(markerLayer != null) {
            markerLayer.removeAllMarker();
        }      
    }
    
    function rowCnt() {
    	
		var html = "";
		
		html += "<div class='info__box info1 cell'>";
		html += "<div class='info__tit'>";
        html += "<p class='tit'>전체 안심식당 수 <span>(단위 : 개)</span></p></div>";
        html += "<div class='info__num'>";
        html += "<p id='totalCnt'>"+49321+"</p></div></div>";
        html += "<div class='info__box info2 cell'>";
        html += "<div class='info__tit'>";
        html += "<p id='sidoNm' class='tit'>"+'세종특별자치시'+" 안심식당 수 <span>(단위 : 개)</span></p></div>";
        html += "<div class='info__num'>"
        html += "<p id='siCnt'>"+360+"</p></div></div>";
        html += "<div class='info__box info3 cell'>";
        html += "<div class='info__tit'>";
        html += "<p id='sidoNm2' class='tit'>"+'세종특별자치시'+" 업종별 <span>(단위 : 개)</span></p></div>";
        html += "<div class='info__type row'>";
        html += "<div class='info__left cell'>";
        html += "<div><p>한식</p>";
        html += "<span id='cntA'>"+214+"</span></div><div>";
        html += "<p>서양식</p>";
        html += "<span id='cntB'>"+69+"</span></div><div>";
        html += "<p>기타 음식점업</p>";
        html += "<span id='cntC'>"+38+"</span></div></div>";
        html += "<div class='info__right cell'>";
        html += "<div><p>일식</p>";
        html += "<span id='cntD'>"+22+"</span></div><div>";
        html += "<p>중식</p>";
        html += "<span id='cntE'>"+12+"</span></div><div>";
        html += "<p>기타 외국식</p>";
        html += "<span id='cntF'>"+5+"</span>";
        html += "</div></div></div></div>";
        
		$("#rowCnt").html(html);
	}
</script>

<form id="myForm" name="myForm">
    <input type="hidden" id="siNm" name="siNm" value="세종특별자치시">
</form>

    <div id="wrap">
        
        
        
        <div id="contents">
            <div class="cont__wrap row">
<!--                 <div class="cont__left cell"> -->
<!--                     <p class="c__tit">안심식당이란?</p> -->
<!--                     <p class="c__con">안심식당은 ‘덜어먹기 가능한 도구 비치・제공', '위생적 수저관리' , '종사자마스크 착용'을 준수하는 곳으로 소재지 지자체의 인증을 받은 음식점 입니다.</p> -->
<!--                     <p class="c__tit">안심식당 점주에게 주는 가치</p> -->
<!--                     <p class="c__con">15만원 상당의 방역물품 및 안심식당 지정 표지판(또는 스티커) 지원받으며, 네이버, 다음, 티맵 등 포털에 ＇안심식당＇ 표출을 통한 홍보를 할 수 있습니다.</p> -->
<!--                     <p class="c__tit">안심식당 소비자에게 주는 가치</p> -->
<!--                     <p class="c__con">위드 코로나로 건강한 식문화에 더욱 신경 써야 하는 지금, “인증“ 받은 음식점에서 안전한 식사를 즐길 수 있습니다.</p> -->
<!--                 </div> -->
                <div class="cont__right cell" style="height:480px;">
                <div id="vmap" style="width:100%;height:420px;left:0px;top:0px"><div class="ol-viewport" style="position: relative; overflow: hidden; width: 100%; height: 100%; touch-action: none;"><canvas class="ol-unselectable" width="844" height="378" style="width: 100%; height: 100%;"></canvas><div class="ol-overlaycontainer"></div><div class="ol-overlaycontainer-stopevent"><div class="vw-logo vw-control" style="color: rgb(17, 17, 17); display: none;"><logobtn><img src="./map_files/logo_openplatform.png" alt="공간정보 오픈플랫폼"></logobtn></div><div class="vw-notice" style="display: none;"><noticebtn><img src="./map_files/notice_aboutmap.png" alt="지적도를 포함한 모든 주제도는 참고용으로만 사용하시기 바랍니다."></noticebtn></div><div class="vw-scale-line ol-unselectable"><div class="vw-scale-line-inner" style="width: 33px;">500 m</div></div></div></div><div class="ol-viewport" style="position: relative; overflow: hidden; width: 100%; height: 100%; touch-action: none;"><canvas class="ol-unselectable" width="938" height="420" style="width: 100%; height: 100%;"></canvas><div class="ol-overlaycontainer"></div><div class="ol-overlaycontainer-stopevent"><div class="vw-logo vw-control" style="color: rgb(17, 17, 17); display: none;"><logobtn><img src="https://map.vworld.kr/images/ol3/logo_openplatform.png" alt="공간정보 오픈플랫폼"></logobtn></div><div class="vw-notice" style="display: none;"><noticebtn><img src="https://map.vworld.kr/images/maps/notice_aboutmap.png" alt="지적도를 포함한 모든 주제도는 참고용으로만 사용하시기 바랍니다."></noticebtn></div><div class="vw-scale-line ol-unselectable"><div class="vw-scale-line-inner" style="width: 65px;">500 m</div></div></div></div></div>
                    <div>
                        <form id="searchForm" action="https://data.mafra.go.kr/prent/indexPrentMap.do#" class="form_data" onsubmit="return false;">
                            <!-- nsdi apikey 시작 -->   
                            <input type="hidden" id="sido_key" value="12685d425f1af0872d756c">
                            <input type="hidden" id="sigoon_key" value="b0888bae39fbd0463a9252"> 
                            <input type="hidden" id="dong_key" value="91afccaa8d7f499151ee3b">
                            <!-- nsdi apikey 종료 -->       
                            <input type="hidden" name="apiKey" value="E09FE1B8-CD2B-31FB-8200-0A82D52143DB">
                            
                            <!-- 2022-02-16 ADD : 디자인반영 -->
                            <div class="int-search mt10">
                                <div class="mu-selectbox w160">
                                    <select id="sido_code"><option value="">-- 시도선택 --</option><option value="11">서울특별시</option><option value="26">부산광역시</option><option value="27">대구광역시</option><option value="28">인천광역시</option><option value="29">광주광역시</option><option value="30">대전광역시</option><option value="31">울산광역시</option><option value="36">세종특별자치시</option><option value="41">경기도</option><option value="42">강원도</option><option value="43">충청북도</option><option value="44">충청남도</option><option value="45">전라북도</option><option value="46">전라남도</option><option value="47">경상북도</option><option value="48">경상남도</option><option value="50">제주특별자치도</option></select>
                                </div>
                                <div class="mu-selectbox w160">
                                    <select id="sigoon_code">
                                        <option value="">-- 시군선택 --</option>
                                    </select>
                                </div>
                                <input type="text" class="mu-input w250" id="title" placeholder="검색어를 입력하세요.">
                                <button type="button" class="mu-btn mu-btn-secondary" id="btnSearch"><span>조회</span></button>
                            </div>
                            <!-- //2022-02-16 ADD : 디자인반영 -->
                            </form>
                            <form id="dataForm">
                                <input type="hidden" name="key" value="E09FE1B8-CD2B-31FB-8200-0A82D52143DB">
                                <input type="hidden" name="domain" value="https://data.mafra.go.kr">
                                <input type="hidden" name="service" value="data">
                                <input type="hidden" name="version" value="2.0">
                                <input type="hidden" name="request" value="getfeature">
                                <input type="hidden" name="format" value="json">
                                <input type="hidden" name="size" value="10">
                                <input type="hidden" name="page" value="1">
                                <input type="hidden" name="data" value="LT_C_ADSIGG_INFO"> <!-- 표시영역설정 (LT_C_ADSIDO_INFO : 시도, LT_C_ADSIGG_INFO : 시군,  LT_C_ADEMD_INFO : 동) -->
                                <input type="hidden" name="geometry" value="true">
                                <input type="hidden" name="attribute" value="true">
                                <input type="hidden" name="crs" value="EPSG:900913">
                            </form>
                    </div>
                </div>
            </div>
            <div class="cont__wrap row detail-view pc-only" id="draw_chart_box">
                <div class="cont__left cell">
                    <p class="c__tit">안심식당이란?</p>
                    <p class="c__con">안심식당은 ‘덜어먹기 가능한 도구 비치・제공', '위생적 수저관리' , '종사자마스크 착용'을 준수하는 곳으로 소재지 지자체의 인증을 받은 음식점 입니다.</p>
                    <p class="c__tit">안심식당 점주에게 주는 가치</p>
                    <p class="c__con">15만원 상당의 방역물품 및 안심식당 지정 표지판(또는 스티커) 지원받으며, 네이버, 다음, 티맵 등 포털에 ＇안심식당＇ 표출을 통한 홍보를 할 수 있습니다.</p>
                    <p class="c__tit">안심식당 소비자에게 주는 가치</p>
                    <p class="c__con">위드 코로나로 건강한 식문화에 더욱 신경 써야 하는 지금, “인증“ 받은 음식점에서 안전한 식사를 즐길 수 있습니다.</p>
                </div>
                <div class="cont__left cell">
                    <p class="c__tit">신청대상</p>
                    <p class="c__con">일반 식사를 제공하는 일반음식점 또는 휴게음식점 영업자 중 아래 준수사항을 지키는 영업자</p>
                    <ul class="c__list">
                        <li>- 종사자 올바른 마스크 착용</li>
                        <li>- 개인음식 덜어먹기</li>
                        <li>- 음식점 소독 및 주기적인 환기</li>
                        <li>- 위생적 수저 관리</li>
                    </ul>
                    <p class="c__tit">신청방법</p>
                    <p class="c__con">각 지자체 방문/팩스/이메일을 통해 신청</p>
                    <p class="c__con c__last">자세한 내용은 지자체 홈페이지 및 문의를 통해 확인</p>
                </div>
<!--                 <div id="draw_chart_two" class="cont__right cell stacked-chart-container js-stacked-chart-container" style="position: relative;" align="center"> -->
<!--                 </div> -->
            </div>
        </div>
    </div>

<!-- <!--stack2group -->
<!-- <script src="/prent/d3.v3.min.js" type="text/javascript"></script> -->
<!-- <script src="/prent/underscore-min.js" type="text/javascript"></script> -->
<script>
//<![CDATA[ 
    var select_option_Html = "<div id=\"select_controls\">";
        select_option_Html += " <form class=\"controls\">";
        select_option_Html += "     <label><input type=\"radio\" name=\"mode\" value=\"stacked\" checked>Stacked</label>";
        select_option_Html += "     <label><input type=\"radio\" name=\"mode\" value=\"grouped\">Grouped</label>";
        select_option_Html += " </form>";                                   
        select_option_Html += "</div>";
        select_option_Html += "<svg class=\"stacked-chart js-stacked-chart\"></svg>";                               
        select_option_Html += "<div class=\"tooltip js-tooltip\">";
        select_option_Html += " <div class=\"tooltip-wrapper\">";
        select_option_Html += "     <table class=\"tooltip-table js-tooltip-table\"></table>";
        select_option_Html += " </div>";
        select_option_Html += "</div>";

    $("#draw_chart_two").html(select_option_Html);

    var fileurl = '49321';
	
    d3.json(fileurl,function(data){
        
        var sidoList = ["2021-01","2021-02","2021-03","2021-04","2021-05","2021-06","2021-07","2021-08","2021-09","2021-10","2021-11","2021-12","2021-01","2022-02","2022-03","2022-04","2022-05"];
    
        //x축 라벨
        var seriesNames = new Array();
        //y축 값
        var seriesData = d3.map();
        
//         data.forEach(function(d){
//             seriesNames.push(d.seriesnames);
//             seriesData.set(d.seriesnames,d.layers);
//         });
            
        function bumpLayer(name){
            
            //나머지 시도를 구한다.
            var namuzarr = new Array();     
            for(var i=0; i<sidoList.length; i++){
                var cnt = 0;
                
                for(var j=0; j<seriesData.get(name).length; j++){
    
                    if(sidoList[i] == seriesData.get(name)[j].x){
                        cnt = 1;
                    }   
                }
                if(cnt == 0){
                    var namuz = {
                            x : sidoList[i],
                            y : 0
                    };
                    namuzarr.push(namuz);
                }
                
            }   
            
            // 위에서 구한 나머지 시도를 데이터 배열에 추가한다(push)
            var dataarr = seriesData.get(name);     
            for(var i=0; i<namuzarr.length; i++){
                dataarr.push(namuzarr[i])       
            }       
            
            //위에서 추가된 배열중 시도에 없는 쓰레기 데이터를 구한다.
            for(var i=0; i<dataarr.length; i++){
                var cnt = 0;
                
                for(var j=0; j<sidoList.length; j++){
    
                    if(dataarr[i].x == sidoList[j]){
                        cnt = 1;
                    }   
                }
                if(cnt == 0){
                    dataarr.splice(i,1);
                }
                
            }           
            
            var a = dataarr,i;
            return a.map(function (d, i) { return {x: i, y: d.y}; });
            
        }
        
        var numSamples = sidoList.length,
            numSeries = seriesNames.length;
        
        var color = d3.scale.category20c();     
        
        var data = seriesNames.map(function (name) {
                return {
                    name: name,
                    values: bumpLayer(name)
                };
            }),
            stack = d3.layout.stack().values(function (d) { return d.values; });
    
        
        stack(data);
    
        var chartMode = "stacked",
            numEnabledSeries = numSeries,
            lastHoveredBarIndex,
            containerWidth = document.querySelector(".js-stacked-chart-container").clientWidth,
            containerHeight = 500,
            margin = {top: 80, right: 30, bottom: 20, left: 50},
            width = containerWidth - margin.left - margin.right,
            height = containerHeight - margin.top - margin.bottom,
            widthPerStack = width / numSamples,
            animationDuration = 400,
            delayBetweenBarAnimation = 10,
            numYAxisTicks = 8,
            maxStackY = d3.max(data, function (series) { return d3.max(series.values, function (d) { return d.y0 + d.y; }); }),
            paddingBetweenLegendSeries = 5,
            legendSeriesBoxX = 0,
            legendSeriesBoxY = 0,
            legendSeriesBoxWidth = 20,
            legendSeriesBoxHeight = 15,
            legendSeriesHeight = legendSeriesBoxHeight + paddingBetweenLegendSeries,
            legendSeriesLabelX = -5,
            legendSeriesLabelY = legendSeriesBoxHeight / 2,
            legendMargin = 20,
            legendX = containerWidth - legendSeriesBoxWidth - legendMargin,
            legendY = legendMargin,
            overlayTopPadding = 20,
            tooltipBottomMargin = 12;
    
        var binsScale = d3.scale.ordinal()
            .domain(d3.range(numSamples))
            .rangeBands([0, width], 0.1, 0.05);
    
        var xScale = d3.scale.linear()
            .domain([0, numSamples])
            .range([0, width]);
    
        var yScale = d3.scale.linear()
            .domain([0, maxStackY])
            .range([height, 0]);
    
        var heightScale = d3.scale.linear()
            .domain([0, maxStackY])
            .range([0, height]);
    
        var xAxis = d3.svg.axis()
            .scale(xScale) //binsScale)
            .ticks(numSamples)
            .tickFormat(function(d, i){return sidoList[i];})
            .orient("bottom");
    
        var yAxis = d3.svg.axis()
            .scale(yScale)
            .orient("left");
    
        var enabledSeries = function () { return _.reject(data, function (series) { return series.disabled; }); };
    
        var seriesClass = function (seriesName) {
            return "series-" + seriesName.toLowerCase();        
        };
        
        var layerClass = function (d) {
            return "layer " + seriesClass(d.name); 
        };
    
        var legendSeriesClass = function (d) {
            return "clickable " + seriesClass(d); 
        };
    
        var barDelay = function (d, i) { return i * delayBetweenBarAnimation; };
    
        var joinKey = function (d) { return d.name; };
    
        var stackedBarX = function (d) { return binsScale(d.x); };
    
        var stackedBarY = function (d) { return yScale(d.y0 + d.y); };
    
        var stackedBarBaseY = function (d) { return yScale(d.y0); };
    
        var stackedBarWidth = binsScale.rangeBand();
    
        var groupedBarX = function (d, i, j) { return binsScale(d.x) + j * groupedBarWidth(); };
    
        var groupedBarY = function (d) { return yScale(d.y); };
    
        var groupedBarBaseY = height;
    
        var groupedBarWidth = function () { return binsScale.rangeBand() / numEnabledSeries; };
    
        var barHeight = function (d) { return heightScale(d.y); };
    
        var transitionStackedBars = function (selection) {
            selection.transition()
                .duration(animationDuration)
                .delay(barDelay)
                .attr("y", stackedBarY)
                .attr("height", barHeight);
        };
    
        var svg = d3.select(".js-stacked-chart")
            .attr("width", containerWidth)
            .attr("height", containerHeight);
    
        var mainArea = svg.append("g")
            .attr("class", "main-area")
            .attr("transform", "translate(" + margin.left + "," + margin.top + ")");
    
        mainArea.append("g")
            .attr("class", "grid-lines")
            .selectAll(".grid-line").data(yScale.ticks(numYAxisTicks))
                .enter().append("line")
                    .attr("class", "grid-line")
                    .attr("x1", 0)
                    .attr("x2", width)
                    .attr("y1", yScale)
                    .attr("y2", yScale);
    
        var layersArea = mainArea.append("g")
            .attr("class", "layers");
    
        var layers = layersArea.selectAll(".layer").data(data)
            .enter().append("g")
                .attr("class", layerClass);
        
        d3.selectAll(".layer").style("fill", function(d, i) { return color(d.name); });
    
        layers.selectAll("rect").data(function (d) { return d.values; })
            .enter().append("rect")
                .attr("x", stackedBarX)
                .attr("y", height)
                .attr("width", stackedBarWidth)
                .attr("height", 0)
                .call(transitionStackedBars);
    
        mainArea.append("g")
            .attr("class", "x axis")
            .attr("transform", "translate(0," + height + ")")
            .call(xAxis);
    
        mainArea.append("g")
            .attr("class", "y axis")
            .call(yAxis);
    
        svg.append("rect")
            .attr("class", "overlay")
            .attr("transform", "translate(" + margin.left + "," + margin.top + ")")
            .attr("x", 0)
            .attr("y", 0)
            .attr("width", width)
            .attr("height", height)
            .on("mousemove", showTooltip)
            .on("mouseout", hideTooltip);
    
        var legendSeries = svg.append("g")
            .attr("class", "legend")
            .attr("transform", "translate(" + legendX + "," + legendY + ")")
            .selectAll("g").data(seriesNames.reverse())
                .enter().append("g")
                    .attr("class", legendSeriesClass)
                    .attr("transform", function (d, i) { return "translate(0," + (i * legendSeriesHeight) + ")"; })
                    .on("click", toggleSeries);
    
        d3.selectAll(".stacked-chart .clickable").attr("style","cursor: pointer;");
        d3.selectAll(".clickable").style("fill", function(d, i) { return color(d); });
        
        legendSeries.append("rect")
            .attr("class", "series-box")
            .attr("x", legendSeriesBoxX)
            .attr("y", legendSeriesBoxY)
            .attr("width", legendSeriesBoxWidth)
            .attr("height", legendSeriesBoxHeight);
    
        legendSeries.append("text")
            .attr("class", "series-label")
            .attr("x", legendSeriesLabelX)
            .attr("y", legendSeriesLabelY)
            .text(String);
    
    
        d3.selectAll(".js-stacked-chart-container input").on("change", changeChartMode);
        
    
    
        
        /**
         * Toggles a certain series.
         * @param {String} seriesName The name of the series to be toggled
         */
        function toggleSeries (seriesName) {
            var series,
                isDisabling,
                newData;
        
            series = _.findWhere(data, { name: seriesName });
            isDisabling = !series.disabled;
        
            if (isDisabling === true && numEnabledSeries === 1) {
                return;
            }
        
            d3.select(this).classed("disabled", isDisabling);
        
            series.disabled = isDisabling;
            newData = stack(enabledSeries());
            numEnabledSeries = newData.length;
            layers = layers.data(newData, joinKey);
        
            if (isDisabling === true) {
                removeSeries();
            }
            else {
                addSeries();
            }
        }
        
        /**
         * Removes a certain series.
         */
        function removeSeries () {
            var layerToBeRemoved;
        
            layerToBeRemoved = layers.exit();
            if (chartMode === "stacked") {
                removeStackedSeries(layerToBeRemoved);
            }
            else {
                removeGroupedSeries(layerToBeRemoved);
            }
        }
        
        /**
         * Smoothly transitions and then removes a certain series when the chart is in `stacked` mode.
         * @param {d3.selection} layerToBeRemoved The layer that contains the series' bars
         */
        function removeStackedSeries (layerToBeRemoved) {
            layerToBeRemoved.selectAll("rect").transition()
                .duration(animationDuration)
                .delay(barDelay)
                .attr("y", stackedBarBaseY)
                .attr("height", 0)
                .call(endAll, function () {
                    layerToBeRemoved.remove();
                });
        
            transitionStackedBars(layers.selectAll("rect"));
        }
        
        /**
         * Smoothly transitions and then removes a certain series when the chart is in `grouped` mode.
         * @param {d3.selection} layerToBeRemoved The layer that contains the series' bars
         */
        function removeGroupedSeries (layerToBeRemoved) {
            layerToBeRemoved.selectAll("rect").transition()
                .duration(animationDuration)
                .delay(barDelay)
                .attr("y", groupedBarBaseY)
                .attr("height", 0)
                .call(endAll, function () {
                    layerToBeRemoved.remove();
        
                    layers.selectAll("rect").transition()
                        .duration(animationDuration)
                        .delay(barDelay)
                        .attr("x", groupedBarX)
                        .attr("width", groupedBarWidth);
                });
        }
        
        /**
         * Adds a certain series.
         */
        function addSeries () {
            var newLayer;
        
            newLayer = layers.enter().append("g")
                .attr("class", layerClass);
            
            d3.selectAll(".layer").style("fill", function(d, i) { return color(d.name); });
        
            if (chartMode === "stacked") {
                addStackedSeries(newLayer);
            }
            else {
                addGroupedSeries(newLayer);
            }
        }
        
        /**
         * Smoothly transitions and adds a certain series when the chart is in `stacked` mode.
         * @param {d3.selection} newLayer The new layer to be added
         */
        function addStackedSeries (newLayer) {
            newLayer.selectAll("rect").data(function (d) { return d.values; })
                .enter().append("rect")
                    .attr("x", stackedBarX)
                    .attr("y", stackedBarBaseY)
                    .attr("width", stackedBarWidth)
                    .attr("height", 0);
        
            transitionStackedBars(layers.selectAll("rect"));
        }
        
        /**
         * Smoothly transitions and adds a certain series when the chart is in `grouped` mode.
         * @param {d3.selection} newLayer The new layer to be added
         */
        function addGroupedSeries (newLayer) {
            var newBars;
        
            layers.selectAll("rect").transition()
                .duration(animationDuration)
                .delay(barDelay)
                .attr("x", groupedBarX)
                .attr("width", groupedBarWidth)
                .call(endAll, function () {
                    newBars = newLayer.selectAll("rect").data(function (d) { return d.values; })
                        .enter().append("rect")
                            .attr("y", groupedBarBaseY)
                            .attr("width", groupedBarWidth)
                            .attr("height", 0);
        
                    layers.selectAll("rect").attr("x", groupedBarX);
        
                    newBars.transition()
                        .duration(animationDuration)
                        .delay(barDelay)
                        .attr("y", groupedBarY)
                        .attr("height", barHeight);
                });
        }
        
        /**
         * Changes the chart to the selected mode: `stacked` or `grouped`.
         * In `stacked` mode, the bars of each bin are stacked together.
         * In `grouped` mode, the bars of each bin are placed side by side.
         */
        function changeChartMode() {
            chartMode = this.value;
            if (chartMode === "stacked") {
                stackBars();
            }
            else {
                groupBars();
            }
        }
        
        /**
         * Smoothly transitions the chart to `stacked` mode.
         * In this mode, the bars of each bin are stacked together.
         */
        function stackBars() {
            layers.selectAll("rect").transition()
                .duration(animationDuration)
                .delay(barDelay)
                .attr("y", stackedBarY)
                .transition()
                    .duration(animationDuration)
                    .attr("x", stackedBarX)
                    .attr("width", stackedBarWidth);
        }
        
        /**
         * Smoothly transitions the chart to `grouped` mode.
         * In this mode, the bars of each bin are placed side by side.
         */
        function groupBars() {
            layers.selectAll("rect").transition()
                .duration(animationDuration)
                .delay(barDelay)
                .attr("x", groupedBarX)
                .attr("width", groupedBarWidth)
                .transition()
                    .duration(animationDuration)
                    .attr("y", groupedBarY);
        }
        
        /**
         * Shows the tooltip.
         */
        function showTooltip() {
            var hoveredBarIndex,
                tooltip;
        
            hoveredBarIndex = (d3.mouse(this)[0] / widthPerStack) | 0;
            if (hoveredBarIndex === lastHoveredBarIndex) {
                return;
            }
            lastHoveredBarIndex = hoveredBarIndex;
        
            layers.selectAll("rect").classed("highlighted", function (d, i) { return (i === hoveredBarIndex); });
        
            tooltip = $(".js-tooltip");
            tooltip.find(".js-tooltip-table").html(tooltipContent());
            tooltip.css({
                top:  margin.top  + highestBinBarHeight() - tooltip.outerHeight() - tooltipBottomMargin,
                left: margin.left + (hoveredBarIndex * widthPerStack) + (widthPerStack / 2) - (tooltip.outerWidth() / 2),
            }).fadeIn();
        }
        
        function tooltipContent () {
            var bars;
        
            bars = [];
            layers.each(function (d) {
                bars.unshift({ name: d.name, value: d.values[lastHoveredBarIndex].y.toFixed(1) });          
            }); 
            
            var tooltipHtml = "";
            
            tooltipHtml += "<table>";
            $.each(bars, function(key, bar){
                tooltipHtml += "<tr>";
                tooltipHtml += "<td>"+bar.name+"</td>";
                tooltipHtml += "<td>"+bar.value+"</td>";
                tooltipHtml += "</tr>";
            });
            tooltipHtml += "</table>";
            return tooltipHtml;
        }
        
        /**
         * Hides the tooltip.
         */
        function hideTooltip () {
            $(".js-tooltip").stop().hide();
        
            layers.selectAll("rect")
                .filter(function (d, i) { return (i === lastHoveredBarIndex); })
                .classed("highlighted", false);
        
            lastHoveredBarIndex = undefined;
        }
        
        /**
         * Calculates the height of the highest (not tallest) bar within a certain bin.
         * @return {Number} The height, in pixels, of the highest bar within a certain bin
         */
        function highestBinBarHeight() {
            var bars,
                highestGroupBar;
        
            if (chartMode === "stacked") {
                highestGroupBar = _.last(layers.data()).values[lastHoveredBarIndex];
                return yScale(highestGroupBar.y0 + highestGroupBar.y);
            }
            else {
                bars = _.map(layers.data(), function (series) { return series.values[lastHoveredBarIndex]; });
                highestGroupBar = _.max(bars, function (bar) { return bar.y; });
                return yScale(highestGroupBar.y);
            }
        }
        
        /**
         * Calls a function at the end of **all** transitions.
         * @param {d3.transition} transition A D3 transition
         * @param {Function}      callback   The function to be called at the end of **all** transitions
         */
        function endAll (transition, callback) {
            var n;
        
            if (transition.empty()) {
                callback();
            }
            else {
                n = transition.size();
                transition.each("end", function () {
                    n--;
                    if (n === 0) {
                        callback();
                    }
                });
            }
        }
        
        d3.selectAll(".select_controls .controls").attr("style","position: absolute;top: 24px;left: 18px;");
        d3.selectAll(".stacked-chart .js-stacked-chart .clickable").attr("style","cursor: pointer;");
        
        d3.selectAll(".stacked-chart-container .tooltip").attr("style","position: absolute;font-size: 13px;white-space: nowrap;border: 1px solid black;background-color: white;pointer-events: none;border-radius: 5px;display: none;");
        d3.selectAll(".stacked-chart-container .tooltip-wrapper").attr("style","position: relative;padding: 6px;width: 130px;");
        d3.selectAll(".stacked-chart-container .tooltip-wrapper:before").attr("style","content:'';position: absolute;width: 0;height: 0;bottom: -20px;left: 50%;transform: translateX(-50%);border: 10px solid;border-color: black transparent transparent transparent;");
        d3.selectAll(".stacked-chart-container .tooltip-wrapper:after").attr("style","content:'';position: absolute;width: 0;height: 0;bottom: -19px;left: 50%;transform: translateX(-50%);border: 10px solid;border-color: white transparent transparent transparent;");
        d3.selectAll(".stacked-chart-container .tooltip-table").attr("style","text-align: right;");
                            
        d3.selectAll(".stacked-chart path").attr("style","shape-rendering: crispEdges;");
        d3.selectAll(".stacked-chart line").attr("style","shape-rendering: crispEdges;");
        d3.selectAll(".stacked-chart rect").attr("style","shape-rendering: crispEdges;");
        d3.selectAll(".stacked-chart text").attr("style","font: 10px sans-serif;");
        d3.selectAll(".stacked-chart .axis path").attr("style","fill: none;stroke: #000;");
        d3.selectAll(".stacked-chart .axis line").attr("style","fill: none;stroke: #000;");
        d3.selectAll(".stacked-chart .grid-lines").attr("style","fill: none;stroke: lightgrey;");
        d3.selectAll(".stacked-chart .layer rect").attr("style","opacity: 0.8;transition: opacity 0.5s ease;");
        d3.selectAll(".stacked-chart .layer rect.highlighted").attr("style","opacity: 1;");
        d3.selectAll(".stacked-chart .overlay").attr("style","opacity: 0;");
        d3.selectAll(".stacked-chart .series-box").attr("style","stroke-width: 2px;");
        d3.selectAll(".stacked-chart .disabled .series-box").attr("style","fill-opacity: 0;");
        d3.selectAll(".stacked-chart .series-label").attr("style","fill: black;text-anchor: end;alignment-baseline: central;");
        
        d3.selectAll(".layer").style("fill", function(d, i) { return color(d.name); });
        d3.selectAll(".axis text").attr("transform",function(d) { return "rotate(-45)"; });
    });
//]]>
</script>

<script>
var vmap;
var markerLayer;

$.support.cors = true;

// VMAP 옵션 설정
vw.ol3.MapOptions = {
      basemapType         : vw.ol3.BasemapType.GRAPHIC
    , controlDensity      : vw.ol3.DensityType.EMPTY
    , interactionDensity  : vw.ol3.DensityType.FULL
    , controlsAutoArrange : true
    , homePosition        : vw.ol3.CameraPosition
    , initPosition        : vw.ol3.CameraPosition
}; 

vmap        = new vw.ol3.Map("vmap",  vw.ol3.MapOptions);
markerLayer = new vw.ol3.layer.Marker(vmap);

// 마커레이어 등록
vmap.addLayer(markerLayer);
</script>  
			<!-- 2021-12-29 : ADD - 문의하기 및 top 버튼 추가 / 22-02-16 MOD : position 빼고 이동 -->
            <div class="floating-button-wrap">
                <button type="button" class="mu-btn mu-btn-icon-only que-quick-button" title="문의하기" onclick="location.href='/bbs/qna/indexQnaInsert.do'" style="display:none;"><i class="mu-icon-svg question"></i><span>문의하기</span></button>
                <button type="button" class="mu-btn mu-btn-icon-only go-top-button" title="위로가기"><i class="mu-icon-svg arrow-top"></i><span>위로가기</span></button>
            </div>
            <!-- //2021-12-29 --> 
		</main>
		
		<footer>
			

 
<script>
	$(document).ready(function(){
		
	});	
	$(function() {

		/* selectbox */
		$(".mu-selectbox .mu-value").click(function (e) {
		    e.preventDefault();
			if ($(this).parent().hasClass("disabled") == true){
				return false;
			}

			$(this).next(".mu-list").slideToggle("fast");
			$(this).parent().toggleClass("on");

			$(this).next(".mu-list").children("li").click(function(){
				if ($(this).hasClass("disabled") == true){
					//return false;
				} else if ($(this).children().hasClass("mu-checkbox") == true){
					//return false;
					//$(this).parent().siblings(".mu-value").text($(this).children(".mu-checkbox").children("input:checked").siblings("label").text() + " 외 1개");
				} else {
					$(this).parent().siblings(".mu-value").text($(this).text());
					
					$(this).addClass("active").siblings().removeClass("active");
					$(this).parent().hide();
					$(this).parent().parent().removeClass("on");
				}
			});

		});

		/* selectbox 외에 영역 클릭시 */
		 $('#wrap').click(function(e){
		  if( !$('.mu-selectbox').has(e.target).length ) $('.mu-selectbox').find(".mu-list").hide();
		  
		});
	});
	
</script>




<!-- Matomo -->
<script type="text/javascript">
  var _paq = window._paq = window._paq || [];
  /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
  _paq.push(["setDocumentTitle", document.domain + "/" + document.title]);
  _paq.push(["setCookieDomain", "*.data.mafra.go.kr"]);
  _paq.push(["setDomains", ["*.data.mafra.go.kr","*.data.mafra.go.kr"]]);
  _paq.push(['trackPageView']);
  _paq.push(['enableLinkTracking']);
  (function() {
    var u="//weblog.epis.or.kr/piwik/";
    _paq.push(['setTrackerUrl', u+'matomo.php']);
    _paq.push(['setSiteId', '15']);
    
    if(window.location.href.indexOf('/datafreezone/') > 0){
        _paq.push(['addTracker', '//biglog.epis.or.kr/matomo/matomo.php', '5']);	
    }
    
    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
    g.type='text/javascript'; g.async=true; g.src=u+'matomo.js'; s.parentNode.insertBefore(g,s);
  })();
</script>
<noscript><p><img src="//weblog.epis.or.kr/piwik/matomo.php?idsite=15&amp;rec=1" style="border:0;" alt="" /></p></noscript>
<!-- End Matomo Code -->

		</footer>
		
	</div>
	<div id="popupAlertMessage"></div>


</body></html>